# NMEA-0183 协议简介

`NMEA-0183` 是美国国家海洋电子协会（National Marine Electronics Association）为海用电子设备制定的标准格式。目前业已成了 `GPS`/`北斗`导航设备统一的 RTCM（Radio Technical Commission for Maritime services）标准协议。

NMEA-0183 协议采用 ASCII 码来传递 GPS 定位信息，我们称之为帧。

# 帧格式
形如：$aaccc,ddd,ddd,…,ddd*hh(CR)(LF)

1. `$`：帧命令起始位
2. `aaccc`：地址域，前两位为识别符（aa），后三位为语句名（ccc）
   1. 标识符（aa）有三种: 
      1. `GP`: 用于GPS
      2. `BD`: 用于北斗
      3. `GN`: GPS和北斗共用(GNSS)
   2. 语句名（ccc）有: 
      1. `GGA`: 定位信息
      2. `GSA`: 当前卫星信息
      3. `GSV`: 可见卫星信息
      4. `RMC`: 推荐定位信息
      5. `VTG`: 地面速度信息
      6. `GLL`: 大地坐标信息
      7. `ZDA`: 当前时间信息(UTC)
   3. 标识符和语句名结合起来可以形成如`$GNGGA`, `$GPGGA`, `$GNRMC`, `$BDGSV`等常用命令.
3. `ddd,ddd,…,ddd`：具体的数据字段
4. `*`：语句数据结束的标志，有效信息都包裹在`$`和`*`之间
5. `hh`：校验和（check  sum），$与*之间所有字符 ASCII 码的校验和（各字节做异或运算，得到校验和后，再转换 16 进制格式的 ASCII 字符）
6. `(CR)(LF)`：帧结束，回车和换行符


# $GPGGA
GPS定位信息

`$GPGGA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>,<13>,<14>*<15><CR><LF>`

实例：

`$GPGGA,050701.00,2713.5680820,N,10254.3169400,E,4,17,2.0,823.0678,M,-34.480,M,02,0004*73`

- <1> UTC时间，格式为hhmmss.sss。（时分秒格式 ）   
- <2> 纬度，格式为ddmm.mmmm（前导位数不足则补0）。   
- <3> 纬度半球，N或S（北纬或南纬）。    N（北纬）或S（南纬）   
- <4> 经度，格式为dddmm.mmmm（前导位数不足则补0）。   
- <5> 经度半球，E或W（东经或西经）。   E（东经）或W（西经）    
- <6> 定位质量指示，0=未定位，1=单点定位，2=伪距/SBAS，3=无效PPS，4=RTK固定，5=RTK浮动，6=正在估算，7=手动启动基准站，8=RTK宽巷解，9=伪距（诺瓦泰615）   
- <7> 使用卫星数量，从00到12（前导位数不足则补0）。   
- <8> 水平精确度（0.5 - 99.9）    
- <9> 天线离海平面的高度（-9999.9 - 99999.9）    
- <10> 高度单位，M表示单位米。   
- <11> 大地椭球面相对海平面的高度（-9999.9到9999.9）。   
- <12> 高度单位，M表示单位米。   
- <13> 差分GPS数据期限（RTCM SC-104），最后设立RTCM传送的秒数量。（从最近一次接收到差分信号开始的秒数，如果不是差分定位将为空）    
- <14> 差分参考基站标号，从0000到1023（前导位数不足则补0）。   
- <15> 校验和。

# $GPGSA
当前卫星信息

    $GPGSA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>,<13>,<14>,<15>,<16>,<17>*<18><CR><LF>

实例:

    $GPGSA,A,3,01,20,19,13,,,,,,,,,40.4,24.4,32.2*0A
   
- <1> 模式2：M = 手动， A = 自动。   
- <2> 模式1：定位型式1 = 未定位，2 = 二维定位，3 = 三维定位。   
- <3> 第1信道正在使用的卫星PRN码编号（Pseudo Random Noise，伪随机噪声码），01至32（前导位数不足则补0，最多可接收12颗卫星信息）。   
- <4> 第2信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <5> 第3信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <6> 第4信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <7> 第5信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <8> 第6信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <9> 第7信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <10> 第8信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <11> 第9信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <12> 第10信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <13> 第11信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <14> 第12信道正在使用的卫星PRN码编号（前导位数不足则补0）   
- <15> PDOP综合位置精度因子（0.5 - 99.9）   
- <16> HDOP水平精度因子（0.5 - 99.9）   
- <17> VDOP垂直精度因子（0.5 - 99.9）   
- <18> 校验和

# $GPGSV

可见卫星信息

    $GPGSV, <1>,<2>,<3>,<4>,<5>,<6>,<7>,...,<4>,<5>,<6>,<7>*<8><CR><LF>

实例 

    $GPGSV,3,1,10,20,78,331,45,01,59,235,47,22,41,069,,13,32,252,45*70
   
- <1> 总的GSV语句电文数。（1 - 3）   
- <2> 当前GSV语句号。（1 - 3）   
- <3> 可视卫星总数，00至12。（前导位数不足则补0）   
- <4> 卫星编号，01至32。（前导位数不足则补0）   
- <5> 卫星仰角，00至90度。（前导位数不足则补0）   
- <6> 卫星方位角，000至359度。实际值。（前导位数不足则补0）   
- <7> 信噪比（C/No），00至99dB；无表未接收到讯号。   
- <8> 校验和。
注：每条语句最多包括四颗卫星的信息，每颗卫星的信息有四个 数据项，即：卫星编号、卫星仰角、卫星方位角、信噪比

# $GPRMC

推荐定位信息（Recommended Minimum Specific GPS/TRANSIT Data）

    $GPRMC,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>*<13><CR><LF>

实例 

    $GPRMC,045830.20,A,3107.22165,N,10419.86560,E,0.049,,131216,,,A*74
   
- <1> UTC（Coordinated Universal Time）时间，hhmmss（时分秒）格式   
- <2> 定位状态，A=有效定位，V=无效定位   
- <3> Latitude，纬度ddmm.mmmm（度分）格式（前导位数不足则补0）   
- <4> 纬度半球        N（北半球）或S（南半球）   
- <5> Longitude，经度dddmm.mmmm（度分）格式（前导位数不足则补0）   
- <6> 经度半球        E（东经）或W（西经）   
- <7> 地面速率（000.0~999.9节，Knot，前导位数不足则补0）   
- <8> 地面航向（000.0~359.9度，以真北为参考基准，前导位数不足则补0）   
- <9> UTC日期，ddmmyy（日月年）格式   
- <10> Magnetic Variation，磁偏角（000.0~180.0度，前导位数不足则补0）   
- <11> Declination，磁偏角方向，E（东）或W（西）   
- <12> Mode Indicator，模式指示（仅NMEA0183 3.00版本输出，A=自主定位，D=差分，E=估算，N=数据无效）   
- <13> 校验和。

# $GPCHC

**参考华测组合导航 《CGI-410用户手册》**

    $GPCHC,GPSWeek,GPSTime,Heading,Pitch,Roll,gyro x,gyro y,gyro z,acc x,acc y,acc z,Lattitude,Longitude,Altitude,Ve,Vn,Vu,Baseline,NSV1,NSV2,Status,Age,WarmingCs<CR><LF>

实例

    $GPCHC,2241,457302.80,328.47,0.81,0.39,0.16,-0.18,0.27,-0.0067,0.0141,1.0000,31.02669892,121.43612500,16.54,0.000,0.006,-0.022,0.006,28,30,11,0,2*7E


- GPSWeek 自1980-1-6 至当前的星期数（格林尼治时间）wwww 1980
- GPSTime 自本周日0:00:00 至当前的秒数（格林尼治时间） ssssss.ss 16897.68
- Heading 偏航角（0 至359.99) hhh.hh 289.19
- Pitch 俯仰角（-90 至90) +/-pp.pp -0.42
- Roll 横滚角（-180 至180） +/-rrr.rr 0.21
- gyro x 陀螺X 轴+/-ggg.gg -0.23
- gyro y 陀螺Y 轴+/-ggg.gg 0.07
- gyro z 陀螺Z 轴+/-ggg.gg -0.06
- acc x 加速度计 X 轴+/-a.aaaa 0.0009
- acc y 加速度计 Y 轴+/-a.aaaa 0.0048
- acc z 加速度计 Z 轴+/-a.aaaa -1.0037
- Latitude 纬度（-90 至90） +/-ll.lllllll 38.8594969
- Longitude 经度（-180 至180） +/-ll.lllllll 121.5150073
- Altitude 高度，单位（米） +/-aaaaa.aa 121.51
- Ve 东向速度，单位（米/秒） +/-eee.eee -0.023
- Vn 北向速度，单位（米/秒） +/-nnn.nnn 0.011
- Vu 天向速度，单位（米/秒） +/-uuu.uuu 0.000
- V 车辆速度，单位（米/秒） +/-uuu.uuu 1.500
- NSV1 主天线1 卫星数nn 14
- NSV2 副天线2 卫星数nn 6 
- Status 
  - 系统状态（低半字节）：
    0：初始化
    1：卫导模式
    2：组合导航模式
    3：纯惯导模式
  - 卫星状态（高半字节）：
    0：不定位不定向
    1：单点定位定向
    2：伪距差分定位定向
    3：组合推算
    4：RTK 稳定解定位定向
    5：RTK 浮点解定位定向
    6：单点定位不定向
    7：伪距差分定位不定向
    8：RTK 稳定解定位不定向
    9：RTK 浮点解定位不定向
- Age 差分延时 aa 0
- Warming
  - bit0:
    1：无GPS 消息
    0：正常
  - bit1:
    1:无车辆消息
    0：正常
  - bit3:
    1：陀螺错误
    0：正常
  - bit4:
    1：加速度计错误
    0：正常
    ww 2
- Cs 校验 *hh *47
- `<CR><LF>` 固定包尾



# $GPVTG

地面速度信息

    $GPVTG,<1>,T,<2>,M,<3>,N,<4>,K,<5>*hh

实例

    $GPVTG,,T,,M,0.049,N,0.091,K,A*26
   
- <1> 以真北为参考基准的地面航向(000~359度，前面的0也将被传输)   
- <2> 以磁北为参考基准的地面航向(000~359度，前面的0也将被传输)   
- <3> 地面速率(000.0~999.9节，前面的0也将被传输)   
- <4> 地面速率(0000.0~1851.8公里/小时，前面的0也将被传输)   
- <5> 模式指示(仅NMEA0183 3.00版本输出，A=自主定位，D=差分，E=估算，N=数据无效

# $GPGLL

定位地理信息

    $GPGLL,<1>,<2>,<3>,<4>,<5>,<6>,<7>*hh<CR><LF>
   
- <1> 纬度ddmm.mmmm（度分）格式（前面的0也将被传输）   
- <2> 纬度半球N（北半球）或S（南半球）   
- <3> 经度dddmm.mmmm（度分）格式（前面的0也将被传输）   
- <4> 经度半球E（东经）或W（西经）   
- <5> UTC时间，hhmmss（时分秒）格式   
- <6> 定位状态，A=有效定位，V=无效定位   
- <7> 模式指示（仅NMEA0183 3.00版本输出，A=自主定位，D=差分，E=估算，N=数据无效）

 
# $GPZDA

时间和日期信息

    $GPZDA,<1>,<2>,<3>,<4>*hh<CR><LF>
   
- <1> UTC时间，hhmmss（时分秒）格式   
- <2> UTC日期，日   
- <3> UTC日期，月   
- <4> UTC日期，年

# $GPDTML

大地坐标系信息

    $GPDTML,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>*hh<CR><LF>
   
- <1>本地坐标系代码 W84   
- <2>坐标系子代码 空   
- <3>纬度偏移量   
- <4>纬度半球N（北半球）或S（南半球）   
- <5>经度偏移量   
- <6>经度半球E（东经）或W（西经）   
- <7>高度偏移量   
- <8>坐标系代码 W84

# $GPRME

估计误差信息（GARMIN定义的语句）

    $GPRME,<1>,M,<2>,M,<3>,M*hh<CR><LF>
   
- <1> HPE（水平估计误差），0.0~999.9米   
- <2> VPE（垂直估计误差），0.0~999.9米   
- <3> EPE（位置估计误差），0.0~999.9米

# $GPRMF

GPS定位信息（GARMIN定义的语句）

    $GPRMF,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>,<13>,<14>,<15>*hh<CR><LF>
   
- <1> GPS周数（0~1023）   
- <2> GPS秒数（0~604799）   
- <3> UTC日期，ddmmyy（日月年）格式   
- <4> UTC时间，hhmmss（时分秒）格式   
- <5> GPS跳秒数   
- <6> 纬度ddmm.mmmm（度分）格式（前面的0也将被传输）   
- <7> 纬度半球N（北半球）或S（南半球）   
- <8> 经度dddmm.mmmm（度分）格式（前面的0也将被传输）   
- <9> 经度半球E（东经）或W（西经）   
- <10> 模式，M=手动，A=自动   
- <11> 定位类型，0=没有定位，1=2D定位，2=3D定位   
- <12> 地面速率（0~1851公里/小时）   
- <13> 地面航向（000~359度，以真北为参考基准）   
- <14> PDOP位置精度因子（0~9，四舍五入取整）   
- <15> TDOP时间精度因子（0~9，四舍五入取整）

# $GPRMM

坐标系统信息（GARMIN定义的语句）

    $GPRMM,<1>*hh<CR><LF>
   
- <1> 当前使用的坐标系名称（数据长度可变，如“WGS 84”）
注：该信息在与MapSource进行实时连接的时候使用。

# $GPRMT

工作状态信息（GARMIN定义的语句）

    $GPRMT,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>*hh<CR><LF>
   
- <1> 产品型号和软件版本（数据长度可变，如“GPS 15L/15H VER 2.05”）   
- <2> ROM校验测试，P=通过，F=失败   
- <3> 接收机不连续故障，P=通过，F=失败   
- <4> 存储的数据，R=保持，L=丢失   
- <5> 时钟的信息，R=保持，L=丢失   
- <6> 振荡器不连续漂移，P=通过，F=检测到过度漂移   
- <7> 数据不连续采集，C=正在采集，如果没有采集则为空   
- <8> GPS接收机温度，单位为摄氏度   
- <9> GPS接收机配置数据，R=保持，L=丢失
注：本语句每分钟发送一次，与所选择的波特率无关。

# $GPRMV

三维速度信息（GARMIN定义的语句）

    $GPRMV,<1>,<2>,<3>*hh<CR><LF>
   
- <1> 东向速度，514.4~514.4米/秒   
- <2> 北向速度，514.4~514.4米/秒   
- <3> 上向速度，999.9~9999.9米/秒

# $GPRMB

信标差分信息（GARMIN定义的语句）

    $GPRMB,<1>,<2>,<3>,<4>,<5>,K,<6>,<7>,<8>*hh<CR><LF>
   
- <1> 信标站频率（0.0，283.5~325.0kHz，间隔为0.5kHz）   
- <2> 信标比特率（0，25，50，100或200bps）   
- <3> SNR信标信号信噪比（0~31）   
- <4> 信标数据质量（0~100）   
- <5> 与信标站的距离，单位为公里   
- <6> 信标接收机的通讯状态，0=检查接线，1=无信号，2=正在调谐，3=正在接收，4=正在扫描   
- <7> 差分源，R=RTCM，W=WAAS，N=非差分定位   
- <8> 差分状态，A=自动，W=仅为WAAS，R=仅为RTCM，N=不接收差分信号

# 校验

通过前面的介绍，我们知道每一帧最后都有一个 hh 的校验和，该校验和是通过计算`$`与`*`之间所有字符 ASCII 码的异或运算得到，将得到的结果以 ASCII 字符表示就是该校验（hh）。
例如语句：

    $GNZDA,095555.000,08,12,2015,00,00*4C

校验和（`4C`）计算方法为：

0X47 ^ 0X4E ^ 0X5A ^ 0X44 ^ 0X41 ^ 0X2C ^ 0X30 ^ 0X39 ^ 0X35 ^ 0X35 ^ 0X35 ^ 0X35 ^ 0X2E ^ 0X30 ^ 0X30 ^ 0X30 ^ 0X2C ^ 0X30 ^ 0X38 ^ 0X2C ^ 0X31 ^ 0X32 ^ 0X2C ^ 0X32 ^ 0X30 ^ 0X31 ^ 0X35 ^ 0X2C ^  0X30 ^ 0X30 ^ 0X2C ^ 0X30 ^ 0X30

得到的结果就是 0X4C，用 ASCII 表示就是 4C。


# 参考
- [GPS - NMEA sentence information](http://aprs.gids.nl/nmea/)
- [NMEA-0183 协议简介 | CSDN](https://blog.csdn.net/ba_wang_mao/article/details/127617305)
- [NMEA-0183 协议简介 | CSDN](https://blog.csdn.net/u012241570/article/details/90769388)


